import{r as s,u as M,a as O,c as z,s as p,k as B,t as C,m as P,j as e,G as r,B as d,d as U,n as V,o as $,M as h,p as G,q,v as H,w as W,x as Y,C as J,S as K,y as Q,z as X,A as Z,E as ee}from"./index-CgMpkwRO.js";import{F as ae}from"./FeesEditStud-V5tOf9Lx.js";function se(){const[l,S]=s.useState([]),[b,v]=s.useState([]),[x,c]=s.useState(!1),[o,y]=s.useState(5),[g,j]=s.useState(1),[u,D]=s.useState(""),[m,_]=s.useState([]),F=M();s.useEffect(()=>{O.get(`${z.apiURL}/feeLogs/getFeesLogs`).then(a=>{S(a.data)}).catch(a=>{console.log("Error:",a)})},[x]);const f=a=>{const n=l.find(i=>i.log_id===a);n&&(v(n),c(!0))},k=a=>{_(n=>n.includes(a)?n.filter(i=>i!==a):[...n,a])},T=()=>{const a=l.filter(n=>m.includes(n.log_id));F("/invoice",{state:{data:a}})},t=p(B)(({theme:a})=>({[`&.${C.head}`]:{backgroundColor:a.palette.common.black,color:a.palette.common.white},[`&.${C.body}`]:{fontSize:14}})),w=p(P)(({theme:a})=>({"&:nth-of-type(odd)":{backgroundColor:a.palette.action.hover},"&:last-child td, &:last-child th":{border:0}})),E=a=>{const n=parseInt(a.target.value,10);y(n),j(1)},A=(a,n)=>{j(n)},I=a=>{const n=u.toLowerCase();return Object.values(a).some(i=>i&&i.toString().toLowerCase().includes(n))},L=(g-1)*o,N=g*o,R=l.slice(L,N);return e.jsxs("div",{children:[e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:4,children:e.jsx(d,{variant:"contained",color:"primary",onClick:T,children:"Print"})}),e.jsx(r,{item:!0,xs:4,children:e.jsx(U,{label:"Search",onChange:a=>D(a.target.value),value:u})}),e.jsx(r,{item:!0,xs:4,children:e.jsx(V,{children:e.jsxs($,{value:o,onChange:E,children:[e.jsx(h,{value:"5",children:"5 Per Page"}),e.jsx(h,{value:"10",children:"10 Per Page"}),e.jsx(h,{value:"15",children:"15 Per Page"}),e.jsx(h,{value:l.length,children:"All Per Page"})]})})})]}),e.jsx(G,{component:q,className:"mt-3",children:e.jsxs(H,{sx:{minWidth:700},"aria-label":"customized table",children:[e.jsx(W,{children:e.jsxs(P,{children:[e.jsx(t,{align:"right",children:"Select"}),e.jsx(t,{align:"right",children:"S.No"}),e.jsx(t,{align:"right",children:"Student Name"}),e.jsx(t,{align:"right",children:"Student Image"}),e.jsx(t,{align:"right",children:"Class"}),e.jsx(t,{align:"right",children:"Section"}),e.jsx(t,{children:"Roll No"}),e.jsx(t,{align:"right",children:"Academic Year"}),e.jsx(t,{align:"right",children:"Fee Category"}),e.jsx(t,{align:"right",children:"Fees Amount"}),e.jsx(t,{align:"right",children:"Paid Amount"}),e.jsx(t,{align:"right",children:"Paid Date"}),e.jsx(t,{align:"right",children:"Paid Method"}),e.jsx(t,{align:"right",children:"Actions"})]})}),e.jsx(Y,{children:R.filter(I).map((a,n)=>e.jsxs(w,{children:[e.jsx(t,{align:"right",children:e.jsx(J,{checked:m.includes(a.log_id),onChange:()=>k(a.log_id)})}),e.jsx(t,{align:"right",children:n+1}),e.jsx(t,{align:"right",children:a.stu_name}),e.jsx(t,{align:"right",children:e.jsx("img",{src:a.stu_img,height:"50",width:"50",alt:"Student"})}),e.jsx(t,{align:"right",children:a.cls_name}),e.jsx(t,{align:"right",children:a.sec_name}),e.jsx(t,{component:"th",scope:"row",children:a.roll_no}),e.jsx(t,{align:"right",children:a.academic_year}),e.jsx(t,{align:"right",children:a.fee_category}),e.jsx(t,{align:"right",children:a.amount}),e.jsx(t,{align:"right",children:a.paid_amount}),e.jsx(t,{align:"right",children:a.payment_date}),e.jsx(t,{align:"right",children:a.payment_method}),e.jsxs(t,{align:"right",children:[e.jsx(d,{variant:"contained",color:"primary",onClick:()=>f(a.log_id),children:"Edit"}),e.jsx(d,{variant:"contained",color:"secondary",children:"Delete"})]})]},a.log_id))})]})}),e.jsx(r,{container:!0,spacing:1,display:"flex",justifyContent:"center",className:"mt-3",children:e.jsx(K,{spacing:2,children:e.jsx(Q,{count:Math.ceil(l.length/o),page:g,onChange:A,variant:"outlined"})})}),e.jsxs(X,{open:x,onClose:()=>c(!1),children:[e.jsx(Z,{children:e.jsx(ae,{data:b,onClose:()=>c(!1)})}),e.jsx(ee,{children:e.jsx(d,{onClick:()=>c(!1),children:"Close"})})]})]})}export{se as default};
