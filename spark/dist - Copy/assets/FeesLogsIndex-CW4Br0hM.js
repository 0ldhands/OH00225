import{i as A,r as s,a as L,c as I,s as m,k as R,t as p,m as P,j as e,G as i,L as B,B as c,d as N,n as O,o as $,p as z,q as U,v as V,w as G,x as M,S as q,y as H,z as W,A as Y,E as J}from"./index-CgMpkwRO.js";import{F as K}from"./FeesEditStud-V5tOf9Lx.js";function Z(){const{fees_id:g}=A(),[d,C]=s.useState([]),[S,b]=s.useState([]),[x,l]=s.useState(!1),[r,y]=s.useState(5),[h,j]=s.useState(1),[u,v]=s.useState("");s.useEffect(()=>{g&&L.get(`${I.apiURL}/feeLogs/getFeesLogsByFeeId/${g}`).then(a=>{C(a.data)}).catch(a=>{console.log("Error:",a)})},[x]);const f=a=>{const n=d.find(o=>o.log_id===a);n&&(b(n),l(!0))},t=m(R)(({theme:a})=>({[`&.${p.head}`]:{backgroundColor:a.palette.common.black,color:a.palette.common.white},[`&.${p.body}`]:{fontSize:14}})),D=m(P)(({theme:a})=>({"&:nth-of-type(odd)":{backgroundColor:a.palette.action.hover},"&:last-child td, &:last-child th":{border:0}})),_=a=>{const n=parseInt(a.target.value,10);y(n),j(1)},F=(a,n)=>{j(n)},w=a=>{const n=u.toLowerCase();return Object.values(a).some(o=>o&&o.toString().toLowerCase().includes(n))},E=(h-1)*r,T=h*r,k=d.slice(E,T);return e.jsxs("div",{children:[e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:4,children:e.jsxs(B,{to:"/feesapplication",children:[" ",e.jsx(c,{variant:"contained",color:"primary",children:"Add"})]})}),e.jsx(i,{item:!0,xs:4,children:e.jsx(N,{label:"Search",onChange:a=>v(a.target.value),value:u})}),e.jsx(i,{item:!0,xs:4,children:e.jsx(O,{children:e.jsxs($,{value:r,onChange:_,children:[e.jsx("option",{value:5,children:"5 Per Page"}),e.jsx("option",{value:10,children:"10 Per Page"}),e.jsx("option",{value:15,children:"15 Per Page"}),e.jsx("option",{value:20,children:"20 Per Page"}),e.jsx("option",{value:0,children:"All Per Page"})]})})})]}),e.jsx(z,{component:U,className:"mt-3",children:e.jsxs(V,{sx:{minWidth:700},"aria-label":"customized table",children:[e.jsx(G,{children:e.jsxs(P,{children:[e.jsx(t,{align:"right",children:"Student Name"}),e.jsx(t,{align:"right",children:"Student Image"}),e.jsx(t,{align:"right",children:"Class"}),e.jsx(t,{align:"right",children:"Section"}),e.jsx(t,{children:"Roll No"}),e.jsx(t,{align:"right",children:"Academic Year"}),e.jsx(t,{align:"right",children:"Fee Category"}),e.jsx(t,{align:"right",children:"Fees Amount"}),e.jsx(t,{align:"right",children:"Paid Amount"}),e.jsx(t,{align:"right",children:"Paid Date"}),e.jsx(t,{align:"right",children:"Paid Method"}),e.jsx(t,{align:"right",children:"Actions"})]})}),e.jsx(M,{children:k.filter(w).map(a=>e.jsxs(D,{children:[e.jsx(t,{align:"right",children:a.stu_name}),e.jsx(t,{align:"right",children:e.jsx("img",{src:a.stu_img,height:"50",width:"50",alt:"Student"})}),e.jsx(t,{align:"right",children:a.cls_name}),e.jsx(t,{align:"right",children:a.sec_name}),e.jsx(t,{component:"th",scope:"row",children:a.roll_no}),e.jsx(t,{align:"right",children:a.academic_year}),e.jsx(t,{align:"right",children:a.fee_category}),e.jsx(t,{align:"right",children:a.amount}),e.jsx(t,{align:"right",children:a.paid_amount}),e.jsx(t,{align:"right",children:a.payment_date}),e.jsx(t,{align:"right",children:a.payment_method}),e.jsxs(t,{align:"right",children:[e.jsx(c,{variant:"contained",color:"primary",onClick:()=>f(a.log_id),children:"Edit"}),e.jsx(c,{variant:"contained",color:"secondary",children:"Delete"})]})]},a.log_id))})]})}),e.jsx(i,{container:!0,spacing:1,display:"flex",justifyContent:"center",className:"mt-3",children:e.jsx(q,{spacing:2,children:e.jsx(H,{count:Math.ceil(d.length/r),page:h,onChange:F,variant:"outlined"})})}),e.jsxs(W,{open:x,onClose:()=>l(!1),children:[e.jsx(Y,{children:e.jsx(K,{data:S,onClose:()=>l(!1)})}),e.jsx(J,{children:e.jsx(c,{onClick:()=>l(!1),children:"Close"})})]})]})}export{Z as default};
