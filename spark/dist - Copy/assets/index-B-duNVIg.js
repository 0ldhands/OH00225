import{ac as E,ad as P,j as e,_ as B,r as a,h as M,ae as $,G as t,d as H,T as n,af as U,ag as V,ah as Y,B as G,P as N,a as x,c as g,u as O,e as o,L as C}from"./index-CgMpkwRO.js";import{P as I}from"./index-CBW7ltQf.js";import{G as W,I as q}from"./index-m6SEJXmv.js";import{_ as z,M as Z,g as J}from"./constant-6J_ALP2n.js";import{D as K}from"./Divider-CUZDmsKr.js";function Q(p){return W({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM13.5003 8C13.8278 8.43606 14.0625 8.94584 14.175 9.5H16V11H14.175C13.8275 12.7117 12.3142 14 10.5 14H10.3107L14.0303 17.7197L12.9697 18.7803L8 13.8107V12.5H10.5C11.4797 12.5 12.3131 11.8739 12.622 11H8V9.5H12.622C12.3131 8.62611 11.4797 8 10.5 8H8V6.5H16V8H13.5003Z"},child:[]}]})(p)}var w={},X=P;Object.defineProperty(w,"__esModule",{value:!0});var k=w.default=void 0,ee=X(E()),te=e;k=w.default=(0,ee.default)((0,te.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRightOutlined");const F=({isLoading:p})=>{const b=B(),[m,v]=a.useState(M().format("YYYY-MM-DD")),d=b.palette.secondary[800],[h,f]=a.useState({series:[],options:{chart:{id:"support-chart",sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:1},tooltip:{fixed:{enabled:!1},x:{show:!0},y:{formatter:(r,{seriesIndex:c,dataPointIndex:l,w:u})=>`Total ${r}`,title:{formatter:(r,{seriesIndex:c,dataPointIndex:l,w:u})=>u.config.xaxis.categories[l]}},marker:{show:!1}},xaxis:{categories:[]}}}),[R,_]=a.useState(0),[y,T]=a.useState([]);return a.useEffect(()=>{(async()=>{try{const l=(await x.get(`${g.apiURL}/feeLogs/feeCollectionDashboard?date=${m}`)).data,u=l.map(i=>i.stu_name),j=l.map(i=>parseFloat(i.total_amount)||0),S=j.reduce((i,s)=>i+s,0);_(S),T(l.map(i=>({...i,total_amount:parseFloat(i.total_amount)||0,remainingfee:parseFloat(i.remainingfee)||0}))),f(i=>({...i,series:[{name:"Total Amount",data:j}],options:{...i.options,xaxis:{categories:u},colors:[d],tooltip:{theme:"light",y:{formatter:s=>`Total ${s}`,title:{formatter:(s,{seriesIndex:L,dataPointIndex:D,w:A})=>A.config.xaxis.categories[D]}}}}}))}catch(c){console.error("Error fetching data:",c)}})()},[m]),a.useEffect(()=>{const r={...h.options,colors:[d],tooltip:{theme:"light"}};ApexCharts.exec("support-chart","updateOptions",r)},[d,h.options]),e.jsxs(e.Fragment,{children:[e.jsxs($,{sx:{bgcolor:"secondary.light"},children:[e.jsxs(t,{container:!0,sx:{p:2,pb:0,color:"#fff"},children:[e.jsx(t,{item:!0,xs:12,display:"flex",justifyContent:"end",children:e.jsx(H,{label:"Date",type:"date",value:m,onChange:r=>v(r.target.value),sx:{backgroundColor:"#fff",borderRadius:1}})}),e.jsx(t,{item:!0,xs:12,children:e.jsxs(t,{container:!0,alignItems:"center",justifyContent:"space-between",children:[e.jsx(t,{item:!0,children:e.jsx(n,{variant:"subtitle1",sx:{color:"secondary.dark"},children:"Total Amount"})}),e.jsx(t,{item:!0,children:e.jsx(n,{variant:"h4",sx:{color:"grey.800"},children:R.toFixed(2)})})]})})]}),e.jsx(z,{options:h.options,series:h.series,type:"area",height:205})]}),e.jsxs(Z,{content:!1,children:[e.jsx(U,{children:e.jsxs(t,{container:!0,spacing:J,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(n,{variant:"h4",gutterBottom:!0,children:"Fee Details"})}),y.map((r,c)=>e.jsxs(t,{item:!0,xs:12,children:[e.jsxs(t,{container:!0,direction:"column",children:[e.jsx(t,{item:!0,children:e.jsxs(t,{container:!0,alignItems:"center",justifyContent:"space-between",children:[e.jsx(t,{item:!0,xs:6,sm:8,children:e.jsx(n,{variant:"subtitle1",color:"inherit",children:r.stu_name})}),e.jsx(t,{item:!0,xs:6,sm:4,children:e.jsxs(t,{container:!0,alignItems:"center",justifyContent:"space-between",children:[e.jsx(t,{item:!0,children:e.jsx(n,{variant:"subtitle1",color:"inherit",children:r.total_amount.toFixed(2)})}),e.jsx(t,{item:!0,children:e.jsx(V,{variant:"rounded",sx:{width:24,height:24,borderRadius:"5px",bgcolor:r.remainingfee>0?"error.light":"success.light",color:r.remainingfee>0?"error.dark":"success.dark",ml:2},children:e.jsx(k,{fontSize:"small",color:"inherit"})})})]})})]})}),e.jsx(t,{item:!0,children:e.jsxs(n,{variant:"subtitle2",sx:{color:r.remainingfee>0?"error.dark":"success.dark"},children:[r.remainingfee>0?"Remaining":"Paid"," ",r.payingfee," / Balance ",r.remainingfee]})})]}),e.jsx(K,{sx:{my:1.5}})]},c))]})}),e.jsx(Y,{sx:{p:1.25,pt:0,justifyContent:"center"},children:e.jsxs(G,{size:"small",disableElevation:!0,children:["View All",e.jsx(k,{})]})})]})]})};F.propTypes={isLoading:N.bool};const se=F;function le(){const[p,b]=a.useState(0),[m,v]=a.useState(0),[d,h]=a.useState(0),[f,R]=a.useState("2024-2025"),[_,y]=a.useState(0);a.useState(0);const[T,r]=a.useState(0),[c,l]=a.useState([]);O(),a.useEffect(()=>{x.get(`${g.apiURL}/staffs/getStaffs`).then(s=>{v(s.data.length)}).catch(s=>{console.error("Error fetching staff:",s)}),x.get(`${g.apiURL}/students/getStudentsCount`).then(s=>{b(s.data.total_count)}).catch(s=>{console.error("Error fetching student count:",s)}),x.get(`${g.apiURL}/dashboard/totalPaidAmount/${f}`).then(s=>{h(s.data.total_paid_amount)}).catch(s=>{console.error("Error fetching revenue:",s)}),x.get(`${g.apiURL}/students/getSiblings`).then(s=>{const{siblingsCount:L,siblingsData:D}=s.data;r(L),l(D)}).catch(s=>{console.error("Error fetching siblings:",s)}),x.get(`${g.apiURL}/students/present`).then(s=>{y(s.data.present_count)}).catch(s=>{console.error("Error fetching student present count:",s)})},[f]);const u=()=>{},j=()=>{},S=()=>{},i=()=>{};return e.jsx(o,{sx:{position:"relative",height:"100vh",width:"100%"},children:e.jsxs(t,{container:!0,rowSpacing:4.5,columnSpacing:2.75,style:{background:"linear-gradient(to right, lightblue, pink)"},children:[e.jsx(t,{item:!0,xs:12,sx:{mb:-2.25},children:e.jsx(n,{variant:"h5",children:"Dashboard"})}),e.jsx(t,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(C,{to:"/addStudent",style:{textDecoration:"none"},children:e.jsxs(o,{sx:{backgroundColor:"#5251AC",fontWeight:"bold",height:"130px",width:"250px",borderRadius:"15px",padding:"10px",color:"white",cursor:"pointer","&:hover":{backgroundColor:"#3f3b9e"}},onClick:u,children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"New Admission"}),e.jsxs(o,{display:"flex",alignItems:"center",children:[e.jsx(I,{style:{height:"40px",width:"50px"}}),e.jsx(n,{variant:"h4",ml:"auto",children:p})]}),e.jsx(n,{variant:"body2",children:"This Month"}),e.jsx(n,{variant:"h6",children:"0"})]})})}),e.jsx(t,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(C,{to:"/allstudentlist",style:{textDecoration:"none"},children:e.jsxs(o,{sx:{backgroundColor:"#6789F5",fontWeight:"bold",height:"130px",width:"250px",borderRadius:"15px",padding:"10px",color:"white",cursor:"pointer","&:hover":{backgroundColor:"#5677e4"}},onClick:j,children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Total Students"}),e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"center",children:[e.jsx(I,{style:{height:"40px",width:"50px"}}),e.jsx(n,{variant:"h4",mx:"10px",children:p})]})]})})}),e.jsx(t,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(C,{to:"/allstaffs",style:{textDecoration:"none"},children:e.jsxs(o,{sx:{backgroundColor:"#9EA0D8",fontWeight:"bold",height:"130px",width:"250px",borderRadius:"15px",padding:"10px",color:"white",cursor:"pointer","&:hover":{backgroundColor:"#7f81c2"}},onClick:S,children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Total Staffs"}),e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"center",children:[e.jsx(q,{style:{height:"40px",width:"50px"}}),e.jsx(n,{variant:"h4",mx:"10px",children:m})]})]})})}),e.jsx(t,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(C,{to:"",style:{textDecoration:"none"},children:e.jsxs(o,{sx:{backgroundColor:"#FA8892",fontWeight:"bold",height:"130px",width:"250px",borderRadius:"15px",padding:"10px",color:"white",cursor:"pointer","&:hover":{backgroundColor:"#f87580"}},onClick:i,children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Total Revenue"}),e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"center",children:[e.jsx(Q,{style:{height:"40px",width:"50px"}}),e.jsx(n,{variant:"h4",mx:"10px",children:d||"Loading..."})]})]})})}),e.jsx(t,{item:!0,xs:12,md:12,lg:12,children:e.jsx(se,{})})]})})}export{le as default};
